<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title></title>
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimun-scale=1,maximun-scale=1"/>
<meta name="format-detection" content="telephone=no,address=no,email=no"/>
<link rel="stylesheet" href="css/index.css" />
</head>
<body>
	<section id="wrap">
		<!--<header id="head">
			<div class="headTop">
				<div class="headTopL">
					<span></span>
					<span></span>
					<span></span>
					<span></span>
					<span class="last"></span>
					<div class="topText">SIGNAL</div>
					<div class="icon"></div>
				</div>
				<div class="headTopC">8:16<span>AM</span></div>
				<div class="headTopB clear">
					<div class="bluetooth"></div>
					<div class="centerText">50%</div>
					<div class="electricity"></div>
				</div>
			</div>
			<div class="headBottom clear">
				<div class="return">
					<a href="javascript:;">返回</a>
				</div>
				<div class="bind">我的圈子</div>
				<div class="headBottomS clear">
					<span></span>
					<span></span>
					<span></span>
				</div>
			</div>
		</header>-->
		<section id="fansContent">
			<div class="tab" id="change">
				<ul>
					<li>
						<a href="javascript:;" class="active">
							我的粉丝<span>(206)</span>
						</a>
					</li>
					<li class="second">
						<a href="javascript:;">
							我的关注<span>(19)</span>
						</a>
					</li>
				</ul>
			</div>
			<div id="wrapper">
				<div class="list" id="scroller">
					<ul id="thelist">
						<li>
							<div class="headPortrait ">
								<img src="img/img3.jpg">
							</div>
							<div class="txt">
								<p>小小设计师</p>
								<span class="num">粉丝数：109</span>
								<span class="information"></span>
							</div>
						</li>
						<li>
							<div class="headPortrait ">
								<img src="img/img4.jpg">
							</div>
							<div class="txt">
								<p>王小花－产品设计</p>
								<span class="num">粉丝数：200</span>
								<span class="information"></span>
							</div>
						</li>
						<li>
							<div class="headPortrait ">
								<img src="img/img5.jpg">
							</div>
							<div class="txt">
								<p>美容达人</p>
								<span class="num">粉丝数：425</span>
								<span class="information"></span>
							</div>
						</li>
						<li>
							<div class="headPortrait ">
								<img src="img/img6.jpg">
							</div>
							<div class="txt">
								<p>姚沁蕾</p>
								<span class="num">粉丝数：1092</span>
								<span class="information"></span>
							</div>
						</li>
						<li>
							<div class="headPortrait ">
								<img src="img/img6.jpg">
							</div>
							<div class="txt">
								<p>姚沁蕾</p>
								<span class="num">粉丝数：1092</span>
								<span class="information"></span>
							</div>
						</li>
						<li>
							<div class="headPortrait ">
								<img src="img/img6.jpg">
							</div>
							<div class="txt">
								<p>姚沁蕾</p>
								<span class="num">粉丝数：1092</span>
								<span class="information"></span>
							</div>
						</li>
						<li>
							<div class="headPortrait ">
								<img src="img/img6.jpg">
							</div>
							<div class="txt">
								<p>姚沁蕾</p>
								<span class="num">粉丝数：1092</span>
								<span class="information"></span>
							</div>
						</li>
						<li>
							<div class="headPortrait ">
								<img src="img/img6.jpg">
							</div>
							<div class="txt">
								<p>姚沁蕾</p>
								<span class="num">粉丝数：1092</span>
								<span class="information"></span>
							</div>
						</li>
						<li>
							<div class="headPortrait ">
								<img src="img/img6.jpg">
							</div>
							<div class="txt">
								<p>姚沁蕾</p>
								<span class="num">粉丝数：1092</span>
								<span class="information"></span>
							</div>
						</li>
						<li>
							<div class="headPortrait ">
								<img src="img/img6.jpg">
							</div>
							<div class="txt">
								<p>姚沁蕾</p>
								<span class="num">粉丝数：1092</span>
								<span class="information"></span>
							</div>
						</li>
					</ul>
					<div id="pullUp" class="clear">
						<span class="pullUpIcon"></span><span class="pullUpLabel">下拉刷新</span>
					</div>
				</div>
			</div>
			<div id="wrapper">
				<div class="list" id="scroller">
					<ul id="thelist">
						<li>
							<div class="headPortrait ">
								<img src="img/img3.jpg">
							</div>
							<div class="txt">
								<p>小小设计师</p>
								<span class="num">粉丝数：109</span>
								<span class="information"></span>
							</div>
						</li>
						<li>
							<div class="headPortrait ">
								<img src="img/img4.jpg">
							</div>
							<div class="txt">
								<p>王小花－产品设计</p>
								<span class="num">粉丝数：200</span>
								<span class="information"></span>
							</div>
						</li>
						<li>
							<div class="headPortrait ">
								<img src="img/img5.jpg">
							</div>
							<div class="txt">
								<p>美容达人</p>
								<span class="num">粉丝数：425</span>
								<span class="information"></span>
							</div>
						</li>
						<li>
							<div class="headPortrait ">
								<img src="img/img6.jpg">
							</div>
							<div class="txt">
								<p>姚沁蕾</p>
								<span class="num">粉丝数：1092</span>
								<span class="information"></span>
							</div>
						</li>
						<li>
							<div class="headPortrait ">
								<img src="img/img6.jpg">
							</div>
							<div class="txt">
								<p>姚沁蕾</p>
								<span class="num">粉丝数：1092</span>
								<span class="information"></span>
							</div>
						</li>
						<li>
							<div class="headPortrait ">
								<img src="img/img6.jpg">
							</div>
							<div class="txt">
								<p>姚沁蕾</p>
								<span class="num">粉丝数：1092</span>
								<span class="information"></span>
							</div>
						</li>
						<li>
							<div class="headPortrait ">
								<img src="img/img6.jpg">
							</div>
							<div class="txt">
								<p>姚沁蕾</p>
								<span class="num">粉丝数：1092</span>
								<span class="information"></span>
							</div>
						</li>
						<li>
							<div class="headPortrait ">
								<img src="img/img6.jpg">
							</div>
							<div class="txt">
								<p>姚沁蕾</p>
								<span class="num">粉丝数：1092</span>
								<span class="information"></span>
							</div>
						</li>
						<li>
							<div class="headPortrait ">
								<img src="img/img6.jpg">
							</div>
							<div class="txt">
								<p>姚沁蕾</p>
								<span class="num">粉丝数：1092</span>
								<span class="information"></span>
							</div>
						</li>
						<li>
							<div class="headPortrait ">
								<img src="img/img6.jpg">
							</div>
							<div class="txt">
								<p>姚沁蕾</p>
								<span class="num">粉丝数：1092</span>
								<span class="information"></span>
							</div>
						</li>
					</ul>
					<div id="pullUp" class="clear">
						<span class="pullUpIcon"></span><span class="pullUpLabel">下拉刷新</span>
					</div>
				</div>
			</div>
		</section>
	</section>
</body>
<script>
    window.onload = function (){
    	var iWidth=document.documentElement.getBoundingClientRect().width;iWidth=iWidth>640?640:iWidth;
    	document.getElementsByTagName("html")[0].style.fontSize=iWidth/10+"px";
    	
    	var oTab = document.getElementById('change');
    	var oA = oTab.getElementsByTagName('a');
    	
    	for (var i=0;i<oA.length;i++) {
    		oA[i].index = i;
    		oA[i].onclick = function(){
    			for (var i=0;i<oA.length;i++) {
    				oA[i].className = '';
    			}
    		this.className = 'active';
    		}
    	}
    	
    }
</script>
<script src="js/jquery.js"></script>
<script src="js/iscroll.js"></script>
 <script>
var myScroll, pullDownOffset,
	pullUpEl, pullUpOffset,
	generatedCount = 0;
var oldym = 0;
var oldynum = 0;
var pagekg = true;
function pullUpAction () {
	setTimeout(function () {
		var el, li, i;
		el = document.getElementById('thelist');
		if(pagekg===true){
			oldynum = 0;
			pagekg=false;
			$.ajax({
				//type:"post",
				url: "fans.json",
				dataType: "json",
				async: true,
				success: function(olist) {
					for(i in olist) {
						if(oldynum < oldym+6&&oldynum>=oldym){
							li = document.createElement('li');
							li.innerHTML = '<div class="headPortrait"><img src="'+olist[i]["img"]+'"></div><div class="txt"><p>'+olist[i]["name"]+'</p><span class="num">粉丝数：'+olist[i]["fansnum"]+'</span> <span class="information"></span></div>';
							el.appendChild(li, el.childNodes[0]);
						}
						oldynum++;
						myScroll.refresh();
					};
					pagekg=true;
					if(oldym>=oldynum){
						$('#pullUp').addClass('nomore')
						$('.pullUpLabel').html('没有更多了');
						return false
					};
					oldym=oldym+6;
				}
			});
		}
		
	}, 1000);
}

function loaded() {
	$('#wrapper').css('height',$(window).height()-parseInt($('#change').css('height')));
	pullUpEl = document.getElementById('pullUp');	
	myScroll = new iScroll('wrapper', {
		useTransition: true,
		topOffset: pullDownOffset,
		onRefresh: function () {
			if (pullUpEl.className.match('loading')) {
				pullUpEl.className = '';
				pullUpEl.querySelector('.pullUpLabel').innerHTML = '下拉刷新';
			}
		},
		onScrollMove: function () {
			if (this.y < (this.maxScrollY - 5) && !pullUpEl.className.match('flip')) {
				pullUpEl.className = 'flip';
				pullUpEl.querySelector('.pullUpLabel').innerHTML = '下拉刷新';
				this.maxScrollY = this.maxScrollY;
			} else if (this.y > (this.maxScrollY + 5) && pullUpEl.className.match('flip')) {
				pullUpEl.className = '';
				pullUpEl.querySelector('.pullUpLabel').innerHTML = '下拉刷新';
				this.maxScrollY = pullUpOffset;
			}
		},
		onScrollEnd: function () {
			if (pullUpEl.className.match('flip')) {
				pullUpEl.className = 'loading';
				pullUpEl.querySelector('.pullUpLabel').innerHTML = 'Loading...';	
				pullUpAction();

			}
		}
	});
}
document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
document.addEventListener('DOMContentLoaded', function () { setTimeout(loaded, 200); }, false);


</script>
</html>
